---
layout: post
title: "Mocha"
---

---

# Mocha

---

# 공식 사이트

https://mochajs.org/

---

# Mocha 설명 (사이트)

---

Node.js와 브라우저에서 실행되며
 
 기능이 풍부한 자바 스크립트 테스트 프레임워크로,
 
 비동기 테스트를 간단하고 재미있게 만듭니다.

---

순차적으로 실행되므로 

유연하고 정확한보고가 가능하고 

알 수없는 예외를 올바른 테스트 케이스에 매핑 할 수 있습니다.

---

# 설치

---

## 글로벌 설치

```sh
npm install mocha --global
```

---

## 로컬 설치

```sh
npm install mocha --save-dev
```

---

# 샘플 예제

---

test 디렉터리에 test.js 파일을 생성

---

```js
var assert = require("assert");
//nodejs에서 제공하는 aseert 모듈

describe('Array 테스트', function() {
  describe('indexOf() 메서드', function () {
    it('값이 없을 때에는 -1 을 리턴함', function () {
      assert.equal(-1, [1,2,3].indexOf(5));
      assert.equal(-1, [1,2,3].indexOf(0));
    });
  });
});
```

---

## 실행

```sh
mocha
```

---

## 직접 실행

```sh
mocha test.js
```

---

## 호환가능한 assertion library

* should.js
* expect.js
* chai
* better-assert

---

## 비동기 코드

```js
describe('비동기 코드 테스트', function () {
  describe('#setTimeout', function () {
    it('2초 이내에 완료되지 않으면 실패', function (done) {
      setTimeout(function () {
        done();
      }, 3000);
    });
  });
});
```

---

# Hooks

테스트 케이스마다 반복해서 먼저 설정되어야 하는 부분이나 

테스트를 마치고 초기화가 필요할 경우

---

```js
describe('다양한 hooks 방법', function() {

  before(function() {
    // 이 블록 내의 테스트들을 실행하기에 앞서 한번 실행되는 부분
  });

  after(function() {
    // 이 블록 내의 테스트들을 모두 실행한 후에 한번 실행되는 부분
  });

  beforeEach(function() {
    // 이 블록 내의 각 테스트들이 실행되기 전에 실행
  });

  afterEach(function() {
    // 이 블록 내의 각 테스트들이 실행된 후에 실행
  });

  // test cases
});
```

---

# Reporters

출력되는 결과를 다양한 포맷으로 보여줄수 있습니다.

---

```sh
mocha --reporter spec
mocha --reporter doc
mocha --reporter nyan
mocha --reporter tap
mocha --reporter landing
mocha --reporter list
mocha --reporter progress
mocha --reporter json
mocha --reporter markdown
mocha --reporter html
mocha --reporter min
```

---